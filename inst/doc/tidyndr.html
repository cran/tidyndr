<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Introduction to tidyndr</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Introduction to tidyndr</h1>



<blockquote>
<p><em>“To measure is to know. If you cannot measure it, you cannot improve it.”</em></p>
<p>- Lord Kelvin</p>
</blockquote>
<p>The <a href="https://ndr.shieldnigeriaproject.com/">Nigeria National Data Repository (NDR)</a> houses the de-identified patient-level information for the HIV program in Nigeria. Perhaps the most versatile feature of the repository is that it allows users with login access to download this patient-level information, analyze, and make informed decisions to improve the response of their program towards achieving the <a href="https://unaids.org/en">UNAIDS</a> <strong>three 95s</strong> targets.</p>
<p>Analysis of the de-identified patient-level information is traditionally conducted in Microsoft Excel. While this provides a great platform, it has some downsides which include:</p>
<ol style="list-style-type: decimal">
<li><p>The software must be installed on the user’s computer.</p></li>
<li><p>The user must be familiar with the formula for calculation of the indicator of interest.</p></li>
<li><p>Because of the point-and-click nature of the analysis, it is error-prone. Sometimes these errors go unnoticed by the users giving a rather false result.</p></li>
<li><p>Performing the same analysis periodically can be quite tedious and time-consuming as the analysis is usually done afresh every time.</p></li>
</ol>
<p>The aim of the {tidyndr} package is to eliminate these hurdles by providing the user with an application that can be conducted on a free and open-source software, allows the user to focus on the task to be performed and not the formula, remove user-defined errors, and allow for easy automation of routine activities.</p>
<p>The {tidyndr} functions are grouped into four categories for performing related actions.</p>
<ol style="list-style-type: decimal">
<li><p>Importing functions</p></li>
<li><p>Treatment functions</p></li>
<li><p>Viral Load functions</p></li>
<li><p>Summary functions</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyndr)</span></code></pre></div>
<div id="importing-your-ndr-line-list" class="section level2">
<h2>Importing your NDR line-list</h2>
<p>The <code>read_ndr()</code> function allows you to import your line-list in a nicely configured format for data analysis. It:</p>
<ol style="list-style-type: decimal">
<li><p>Reads your <code>.csv</code> file.</p></li>
<li><p>Formats the data type for each of the column variables as necessary (converts all date variables to dates and categorical variables to factors).</p></li>
<li><p>Converts all column names to <a href="https://en.wikipedia.org/wiki/Snake_case">snake case</a> format.</p></li>
<li><p>Adds three new columns to your data - <code>date_lost</code> (calculated by adding 28 days to the sum of <code>last_drug_pickup_date</code> and the <code>days_of_arv_refill</code>), <code>appointment_date</code> (calculated by adding the number of <code>days_of_arv_refill</code> to the <code>last_drug_pickup_date</code>, and <code>current_status</code> (calculated by classifying the patient as “active” or “inactive” using the value of the <code>time_stamp</code> argument as a reference.</p></li>
</ol>
<p>The <code>read_ndr()</code> has 5 arguments that can be specified. The first arguments two are always required:</p>
<ul>
<li><p><code>path</code> - this specifies the location of the NDR line-list to be imported. You can do this either by specifying the “absolute” file path or a “relative” file path. See <code>?file.path()</code> and <code>?read_ndr()</code> for more details. The line-list must be exactly as downloaded from the NDR.</p></li>
<li><p><code>time_stamp</code> - this is the reference date for the NDR line-list. It is used to derive the <code>current_status</code> of clients based on the last drug pickup date and the number of days of ARV refill. The value for this argument should be specified in the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> “yyyy-mm-dd” format. I recommend that you download the NDR line-list on Monday and specify this date as the previous Friday. That way, you are almost certain that all the data available on the NDR were as at the preceding week and upload of data from the new week has not commenced.</p></li>
<li><p><code>cols</code> - when the value to this argument is absent, <code>read_ndr()</code> uses the column specification for NDR column modifications that occurred between October 2020 and March 2021. NDR column specifications before October 2020 are not accounted for by the default function so these will have to be specified manually. See <code>?vroom::cols()</code> for more details.</p></li>
<li><p><code>quiet</code> - when this is set to FALSE (the default) it prints the names of the two columns added.</p></li>
<li><p><code>...</code> - these are other arguments that can be passed to <code>vroom::vroom()</code>.</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">## import file from the computer. This uses the example file that comes with the {tidyndr} package.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">&quot;ndr_example.csv&quot;</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">package =</span> <span class="st">&quot;tidyndr&quot;</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>ex_ndr <span class="ot">&lt;-</span> <span class="fu">read_ndr</span>(file_path, <span class="at">time_stamp =</span> <span class="st">&quot;2021-02-15&quot;</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="do">## import file from the computer using a few of the `...` arguments and setting quite to &quot;TRUE&quot;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>ndr_example <span class="ot">&lt;-</span> <span class="fu">read_ndr</span>(file_path,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">time_stamp =</span> <span class="st">&quot;2021-02-15&quot;</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">skip =</span> <span class="dv">0</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">comment =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="treatment-functions" class="section level2">
<h2>Treatment functions</h2>
<p>These group of indicators are based on the <a href="https://datim.zendesk.com/hc/en-us/articles/360000084446-MER-Indicator-Reference-Guides">PEPFAR MER</a> treatment indicators and their supporting indicators. They include:</p>
<ol style="list-style-type: decimal">
<li><a href="#tx_new"><code>tx_new()</code></a></li>
<li><a href="#tx_curr"><code>tx_curr()</code></a></li>
<li><a href="#tx_ml"><code>tx_ml()</code></a></li>
<li><a href="#tx_ml_outcomes"><code>tx_ml_outcomes()</code></a></li>
<li><a href="#tx_rtt"><code>tx_rtt()</code></a></li>
<li><a href="#tx_appointment"><code>tx_appointment()</code></a></li>
<li><a href="#tx_mmd"><code>tx_mmd()</code></a></li>
</ol>
<div id="tx_new" class="section level3">
<h3><code>tx_new()</code></h3>
<p>This generates the line-list of clients who started ART within a period. It can be supplied 5 different arguments with the first one being the only compulsory one:</p>
<ul>
<li><p><code>data</code> - the NDR line-list imported using the <code>read_ndr()</code>.</p></li>
<li><p><code>from</code> - the start date for generating the requested line-list. This defaults to the beginning of the Fiscal Year. When this is supplied, it must in in the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format.</p></li>
<li><p><code>to</code> - the end date for generating the requested line-list. This defaults to all clients who started ART after the <code>from</code> date.</p></li>
<li><p><code>states</code> and <code>facilities</code> - the particular state(s) of interest. When this is not supplied,it calculates the new clients for all states and facilities contained in the data.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate tx_new clients for the FY for all states in the data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_new</span>(ndr_example)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5,239 x 52</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1004       0003           </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3008       0003           </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2008       0003           </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30012      0003           </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 5,235 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="do">## generate tx_new for only one state (State 1 in the data) for January 2021.</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_new</span>(ndr_example,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">from =</span> <span class="st">&quot;2021-01-01&quot;</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">to =</span> <span class="st">&quot;2021-01-31&quot;</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">states =</span> <span class="st">&quot;State 1&quot;</span>)</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 244 x 52</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1004       0003           </span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 10070      00029          </span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 10085      00030          </span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 10087      00033          </span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 240 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="tx_curr" class="section level3">
<h3><code>tx_curr()</code></h3>
<p>Generates the line-list of all clients who are still active on treatment. It has 4 different parameters with only the first one as the compulsory argument to be specified. The parameters are:</p>
<ul>
<li><p><code>data</code>, <code>states</code> and <code>facilities</code> - see <code>data</code> for <a href="#tx_new"><code>tx_new</code></a> above.</p></li>
<li><p><code>status</code> - the column to be used to determine the <code>tx_curr</code>. Can be one of two - ‘calculated’ or ‘default’. The ‘calculated’ used the derived <code>current_status</code> column while the ‘default’ uses the NDR <code>current_status_28_days</code> column.</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate current clients using the calculated `current_status` column</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_curr</span>(ndr_example)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 16,696 x 52</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1001       0001           </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2001       0001           </span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3001       0001           </span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1002       0001           </span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 16,692 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="do">## generate current clients using the default `current_status_28_days` column</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_curr</span>(ndr_example,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">status =</span> <span class="st">&quot;default&quot;</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 27,024 x 52</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3001       0001           </span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1002       0001           </span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 3003       0001           </span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1003       0002           </span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 27,020 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="tx_ml" class="section level3">
<h3><code>tx_ml()</code></h3>
<p>This generates the line-list of clients who were active at the beginning of the reference date and have now become inactive at the <code>to</code> date specified. The default is to generate the line-list of all clients who became inactive in the current Fiscal Year (i.e. were active at the beginning of the FY but have now become inactive). It accepts 5 arguments listed below:</p>
<ul>
<li><code>data</code>, <code>from</code>, <code>to</code>, <code>states</code>, <code>facilities</code> - see <a href="#tx_new"><code>tx_new</code></a> documentation above.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate the line-list of clients who were active at the beginning of October 2020 </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="do">## (beginning of FY21) but became inactive at the end of December 2020.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_ml</span>(<span class="at">new_data =</span> ndr_example,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> <span class="st">&quot;2020-10-01&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">to =</span> <span class="st">&quot;2020-12-31&quot;</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="do">## if data from two periods are available, you can supply these to determine the `tx_ml&quot;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/stephenbalogun/example_files/main/ndr_example.csv&quot;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>ndr_old <span class="ot">&lt;-</span> <span class="fu">read_ndr</span>(file_path, <span class="at">time_stamp =</span> <span class="st">&quot;2021-02-15&quot;</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>ndr_new <span class="ot">&lt;-</span> ndr_example</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_ml</span>(<span class="at">old_data =</span> ndr_old,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">new_data =</span> ndr_new)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="do">## generate the line-list of clients who have become inactive for &quot;State 1&quot; and &quot;State 2&quot; </span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="do">## since the beginning of October 2021.</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_ml</span>(<span class="at">new_data =</span> ndr_example,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">states =</span> <span class="fu">c</span>(<span class="st">&quot;State 1&quot;</span>, <span class="st">&quot;State 2&quot;</span>))</span></code></pre></div>
</div>
<div id="tx_ml_outcomes" class="section level3">
<h3><code>tx_ml_outcomes</code></h3>
<p>For the inactive clients generated, you might be interested in subsetting those with specific final outcomes of interest. Currently, the NDR recognizes only two final outcomes (“dead” and “transferred out”). These are the ones that can be subset using the <code>tx_ml_outcomes()</code> function. This function takes only two argument:</p>
<ul>
<li><p><code>data</code> - see <code>data</code> under <a href="#tx_new"><code>tx_new()</code></a> above.</p></li>
<li><p><code>outcome</code> - one of “dead”, “transfer out” (or “transferred out”).</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate the line-list of all clients who became inactive this Fiscal Year</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>ml_example <span class="ot">&lt;-</span> <span class="fu">tx_ml</span>(<span class="at">new_data =</span> ndr_example)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">## subset inactive clients who were transferred out</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_ml_outcomes</span>(ml_example, <span class="at">outcome =</span> <span class="st">&quot;transferred out&quot;</span>)</span></code></pre></div>
</div>
<div id="tx_rtt" class="section level3">
<h3><code>tx_rtt</code></h3>
<p>You can filter for clients who were previously inactive but have returned to treatment and are still active at the end of the period of interest. This is the only function where you will be needing two different sets of data - the first data contains the inactive clients while the second data is where their change in status will be checked. The acceptable arguments to <code>tx_rtt</code> include:</p>
<ul>
<li><p><code>old_data</code> - the dataset including the list of inactive clients.</p></li>
<li><p><code>new_data</code> - a more recent dataset where change in ART status will be evaluated.</p></li>
<li><p><code>states</code>, and <code>facilities</code> - see <a href="#tx_new"><code>tx_new</code></a> above.</p></li>
<li><p><code>status</code> - see <a href="#tx_curr"><code>tx_curr</code></a> above.</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## location of the old line-list that contains the list of inactive clients</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/stephenbalogun/example_files/main/ndr_example.csv&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>old_data <span class="ot">&lt;-</span> <span class="fu">read_ndr</span>(file_path,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">time_stamp =</span> <span class="st">&quot;2021-02-15&quot;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>new_data <span class="ot">&lt;-</span> ndr_example </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_rtt</span>(old_data, new_data)</span></code></pre></div>
</div>
<div id="tx_appointment" class="section level3">
<h3><code>tx_appointment</code></h3>
<p>Sometimes, you are interested in knowing the number of <strong>Active</strong> clients who are due for medication refill/drug pick up within a period of time. This can help you to plan for the visits, forecast medication appointments and also identify active clients who have missed their appointment. The <code>tx_appointment()</code> is one of the supporting treatment indicators that helps in this regard. It takes 6 arguments viz:</p>
<ul>
<li><p><code>data</code>, <code>from</code>, <code>to</code>, <code>states</code> and <code>facilities</code> - kindly see <a href="#tx_new"><code>tx_new()</code></a> documentation above.</p></li>
<li><p><code>status</code> - please refer to the previous documentation for <a href="#tx_curr"><code>tx_curr()</code></a>.</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate list of clients with medication appointment in Q2 of FY21</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>q2_appt <span class="ot">&lt;-</span> <span class="fu">tx_appointment</span>(ndr_example,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">from =</span> <span class="st">&quot;2021-01-01&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">to =</span> <span class="st">&quot;2021-03-31&quot;</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="do">## print the number of clients with appointments in Q2</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(q2_appt)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 11465</span></span></code></pre></div>
</div>
<div id="tx_mmd" class="section level3">
<h3><code>tx_mmd</code></h3>
<p>Knowing the number of months of medications dispensed during the last medication refill allows you to calculate the number of <strong>active</strong> clients who are on MMD (Multi-month Dispensing), i.e. clients who were given between 3 months and 6 months medication during the last clinic visit. You might also be interested in know the details of clients who did not have MMD, or who had more than 6 months medication refill (some of which might be due to data entry errors). The arguments that can be supplied to this function include:</p>
<ul>
<li><p><code>data</code>, <code>states</code>, and <code>facilities</code> - see <a href="#tx_new"><code>tx_new()</code></a> above.</p></li>
<li><p><code>status</code> - see <a href="#tx_curr"><code>tx_curr()</code></a> documentation above.</p></li>
<li><p><code>months</code>- the number of months of ARV medications dispensed during the last clinic visit. The default filters active clients who had between 3 and 6 months of ARV but you can change this to generate the list of clients who had more than 6 months medications dispensed for example.</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_mmd</span>(ndr_example)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 14,310 x 53</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1001       0001           </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2001       0001           </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3001       0001           </span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1002       0001           </span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 14,306 more rows, and 45 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;, months_dispensed &lt;dbl&gt;</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="do">## filter clients who had more than 6 months of ARV</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_mmd</span>(ndr_example,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>       <span class="at">months =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="cn">Inf</span>))</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 x 53</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 53 variables: ip &lt;fct&gt;, state &lt;fct&gt;, lga &lt;fct&gt;, facility &lt;fct&gt;,</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   datim_code &lt;fct&gt;, sex &lt;fct&gt;, patient_identifier &lt;chr&gt;,</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   hospital_number &lt;chr&gt;, date_of_birth &lt;date&gt;, age_at_art_initiation &lt;dbl&gt;,</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_age &lt;dbl&gt;, art_start_date &lt;date&gt;, art_start_date_source &lt;fct&gt;,</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date &lt;date&gt;, last_drug_pickup_date_q1 &lt;date&gt;,</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q2 &lt;date&gt;, last_drug_pickup_date_q3 &lt;date&gt;,</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q4 &lt;date&gt;, last_regimen &lt;fct&gt;,</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_clinic_visit_date &lt;date&gt;, days_of_arv_refill &lt;dbl&gt;,</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;, months_dispensed &lt;dbl&gt;</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="do">## list of clients who had either more than 6 months, or &lt; 3 months medications dispensed</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_mmd</span>(ndr_example,</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>       <span class="at">months =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="cn">Inf</span>))</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2,237 x 53</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 20012      0001           </span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 20021      0008           </span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30027      0009           </span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30031      00010          </span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 2,233 more rows, and 45 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;, months_dispensed &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
<div id="viral-load-indicators" class="section level2">
<h2>Viral Load Indicators</h2>
<p>The viral load group of indicators allows you to be able to generate the list of clients who are eligible for viral load; have a viral load result within the last one year (for adults of 20 years and above) or 6 months (for pediatrics and adolescents); and are virally suppressed. These indicators include:</p>
<ol style="list-style-type: decimal">
<li><p><a href="#tx_vl_eligible"><code>tx_vl_eligible()</code></a></p></li>
<li><p><a href="#tx_pvls_den"><code>tx_pvls_den()</code></a></p></li>
<li><p><a href="#tx_pvls_num"><code>tx_pvls_num()</code></a></p></li>
<li><p><a href="#tx_vl_suppressed"><code>tx_vl_unsuppressed()</code></a></p></li>
</ol>
<div id="tx_vl_eligible" class="section level3">
<h3><code>tx_vl_eligible</code></h3>
<p>Two groups of clients are eligible for routine viral load test - clients who have been on ARV medication for at least 6 months and have not had a viral load result, and clients whose last viral load result is more than 12 months ago (for adults) and more than 6 months ago (for pediatrics and adolescents). <code>tx_vl_eligible()</code> generates this line-list using a combination of the 6 arguments below that can be provided:</p>
<ul>
<li><p><code>data</code>, <code>states</code> and <code>facilities</code> - see <a href="#tx_new"><code>tx_new</code></a> documentation above.</p></li>
<li><p><code>status</code> - please see the documentation for <code>status</code> under <a href="#tx_curr"><code>tx_curr</code></a> above.</p></li>
<li><p><code>ref</code> - the reference date for when the eligibility period should be determined. This should be provided in the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format. When this is not supplied, it assumes you would like to know the clients who are eligible for viral load test as at the day of analysis.</p></li>
<li><p><code>sample</code> - one of two (TRUE or FALSE) to determine if only those who are eligible for viral load sample collection within the period of interest (sample = TRUE) or those eligible for viral load test results (sample = FALSE).</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## list of clients who are eligible for VL sample collection by the end of March 2021</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_vl_eligible</span>(ndr_example,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">ref =</span> <span class="st">&quot;2021-03-31&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">sample =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7,017 x 52</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1001       0001           </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 3006       0002           </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1005       0004           </span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 20012      0001           </span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 7,013 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="do">## filter clients who are eligible for VL test (result) by 31st of March 2021</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_vl_eligible</span>(ndr_example,</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>               <span class="at">ref =</span> <span class="st">&quot;2021-03-31&quot;</span>)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 14,314 x 52</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 1001       0001           </span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2001       0001           </span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3001       0001           </span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1002       0001           </span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 14,310 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="tx_pvls_den" class="section level3">
<h3><code>tx_pvls_den</code></h3>
<p>This determines clients who have a documented viral load result and are not due for a repeat viral load test. It helps you to know what the viral load coverage (the number of those who have a VL result / the number of those eligible [when sample is set to FALSE]). It accepts arguments all the arguments that can be supplied to <a href="#tx_vl_eligible"><code>tx_vl_eligible</code></a> above.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## determine clients whose viral load result is within the last 1 year for adults (&gt;= 20 years) </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## and 6 months for paediatrics and adolescents</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_pvls_den</span>(ndr_example)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7,458 x 52</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2001       0001           </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3001       0001           </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1002       0001           </span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 3005       0001           </span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 7,454 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="do">## ist of clients who will not be due for a repeat VL test by the end of March 2021</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_pvls_den</span>(ndr_example,</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">ref =</span> <span class="st">&quot;2021-03-31&quot;</span>)</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7,297 x 52</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2001       0001           </span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 3001       0001           </span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 1002       0001           </span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 3005       0001           </span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 7,293 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb11-61"><a href="#cb11-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb11-63"><a href="#cb11-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="tx_pvls_num" class="section level3">
<h3><code>tx_pvls_num</code></h3>
<p>This determines the number of clients whose viral load test results are below a particular limit among those with a documented viral load result, thus are said to be virally suppressed. It helps you to know how many clients are doing well on their current medication. It accepts the following arguments:</p>
<ul>
<li><p><code>data</code>, <code>ref</code>, <code>states</code>, <code>facilities</code> and <code>status</code> - kindly see the documentation for <a href="#tx_vl_eligible"><code>tx_vl_eligible()</code></a> above.</p></li>
<li><p><code>n</code> - the reference at which viral load values below are said to be suppressed. The default is 1000.</p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## clients whose last viral load result is within the last 1 year for adults (&gt;= 20 years) </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">## and 6 months for paediatrics and adolescents, and are virally suppressed</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_pvls_num</span>(ndr_example)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2,889 x 52</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2005       0001           </span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2009       0001           </span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30014      0005           </span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30021      0006           </span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 2,885 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a><span class="do">## generate the list of clients whose viral load result is less than 200</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_pvls_num</span>(ndr_example,</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">200</span>)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2,687 x 52</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 2009       0001           </span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30014      0005           </span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30021      0006           </span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 20018      0004           </span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 2,683 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="tx_vl_unsuppressed" class="section level3">
<h3><code>tx_vl_unsuppressed</code></h3>
<p>This determines the number of clients whose viral load test results are above a particular limit among those with a documented viral load result. It accepts the following arguments:</p>
<ul>
<li><p><code>data</code>, <code>ref</code>, <code>states</code>, <code>facilities</code> and <code>status</code> - kindly see the documentation for <a href="#tx_vl_eligible"><code>tx_vl_eligible()</code></a> above.</p></li>
<li><p><code>n</code> - the reference at which viral load values equal to or above are said to be unsuppressed. The default is 1000.</p></li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## clients whose last viral load result is within the last 1 year for adults (&gt;= 20 years) </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="do">## and 6 months for paediatrics and adolescents but were unsuppressed</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tx_vl_unsuppressed</span>(ndr_example)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 369 x 52</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip     state  lga   facility datim_code sex   patient_identif~ hospital_number</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;          </span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 30097      00036          </span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 10081      00027          </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_na~ State~ LGA0~ Facilit~ datim_cod~ F     State 200381     000118         </span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 IP_na~ State~ LGA0~ Facilit~ datim_cod~ M     State 100249     00087          </span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 365 more rows, and 44 more variables: date_of_birth &lt;date&gt;,</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_at_art_initiation &lt;dbl&gt;, current_age &lt;dbl&gt;, art_start_date &lt;date&gt;,</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   art_start_date_source &lt;fct&gt;, last_drug_pickup_date &lt;date&gt;,</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q1 &lt;date&gt;, last_drug_pickup_date_q2 &lt;date&gt;,</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_drug_pickup_date_q3 &lt;date&gt;, last_drug_pickup_date_q4 &lt;date&gt;,</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   last_regimen &lt;fct&gt;, last_clinic_visit_date &lt;date&gt;,</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   days_of_arv_refill &lt;dbl&gt;, pregnancy_status &lt;fct&gt;, current_viral_load &lt;dbl&gt;,</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load &lt;date&gt;, current_viral_load_q1 &lt;dbl&gt;,</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q1 &lt;date&gt;, current_viral_load_q2 &lt;dbl&gt;,</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q2 &lt;date&gt;, current_viral_load_q3 &lt;dbl&gt;,</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q3 &lt;date&gt;, current_viral_load_q4 &lt;dbl&gt;,</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   date_of_current_viral_load_q4 &lt;date&gt;, current_status_28_days &lt;fct&gt;,</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_90_days &lt;fct&gt;, current_status_q1_28_days &lt;fct&gt;,</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q1_90_days &lt;fct&gt;, current_status_q2_28_days &lt;fct&gt;,</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q2_90_days &lt;fct&gt;, current_status_q3_28_days &lt;fct&gt;,</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q3_90_days &lt;fct&gt;, current_status_q4_28_days &lt;fct&gt;,</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   current_status_q4_90_days &lt;fct&gt;, patient_has_died &lt;lgl&gt;,</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   patient_deceased_date &lt;date&gt;, patient_transferred_out &lt;lgl&gt;,</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_out_date &lt;date&gt;, patient_transferred_in &lt;lgl&gt;,</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   transferred_in_date &lt;date&gt;, x49 &lt;chr&gt;, date_lost &lt;date&gt;,</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   appointment_date &lt;date&gt;, current_status &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
<div id="summary-indicators" class="section level2">
<h2>Summary Indicators</h2>
<p>Summary indicators provide aggregates for a particular indicator of interest. {tidyndr} provides two aggregate functions. These are:<br />
1. <a href="#summrise_ndr"><code>summarise_ndr()</code></a></p>
<ol start="2" style="list-style-type: decimal">
<li><a href="#disaggregate"><code>disaggregate()</code></a></li>
</ol>
<div id="summarise_ndr" class="section level3">
<h3><code>summarise_ndr</code></h3>
<p>All the previous functions generates patient-level line-lists. You will most often be interested in a tabular summary of the information provided. This is the work of <code>summarise_ndr()</code> (and its partner <code>summarize_ndr()</code>). It takes all the line-lists that you might have generated, and display a summary table with one column for each of your generated line-lists. <code>summarise_ndr()</code> accepts three arguments:</p>
<ul>
<li><p><code>...</code> - these are the names assigned to each of the line-lists that you have generated.</p></li>
<li><p><code>level</code> - specifies the level at which the summary should be performed. The options are “facility”, “lga”, “state” or “country” (“ip”). The default level is “state”.</p></li>
<li><p><code>names</code> - the names to be assigned to each of the summary columns created. See <code>?summarise_ndr</code> for more details.</p></li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>curr <span class="ot">&lt;-</span> <span class="fu">tx_curr</span>(ndr_example) <span class="co"># generate active clients and assign to &quot;curr&quot;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">tx_new</span>(ndr_example) <span class="co"># generate TX_NEW for the FY and assign to &quot;new&quot;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_ndr</span>(curr, new, <span class="at">level =</span> <span class="st">&quot;state&quot;</span>, <span class="at">names =</span> <span class="fu">c</span>(<span class="st">&quot;curr&quot;</span>, <span class="st">&quot;tx_new&quot;</span>))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 x 4</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ip      state    curr tx_new</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;  &lt;int&gt;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 IP_name State 1  3726    662</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 IP_name State 2  5058   1239</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 IP_name State 3  7912   3338</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Total   -       16696   5239</span></span></code></pre></div>
</div>
<div id="disaggregate" class="section level3">
<h3><code>disaggregate</code></h3>
<p>A very powerful function that allows you to summarise your generated line-list disaggregated based on a particular variable. The disaggregation options currently available are “age (or current age)”, “sex (or gender)”, or “pregnancy status”. It accepts 3 arguments:</p>
<ul>
<li><p><code>data</code> - see <a href="#tx_new"><code>tx_new()</code></a> documentation above.</p></li>
<li><p><code>by</code> and <code>level</code> - see the documentation for <a href="#summarise_ndr"><code>summarise_ndr()</code></a> above.</p></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate list of inactive clients</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>inactives <span class="ot">&lt;-</span> <span class="fu">tx_ml</span>(<span class="at">new_data =</span> ndr_example)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="do">## disaggregate inactive clients by gender at state level</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">disaggregate</span>(inactives,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="do">## disaggregate inactive clients by &quot;age group&quot; at country level</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">disaggregate</span>(inactives,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="st">&quot;current_age&quot;</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">level =</span> <span class="st">&quot;country&quot;</span>)</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
